# 事实验证协议 (Fact Verification Protocol)

**版本**: 1.0
**生效日期**: 2026-02-08
**适用范围**: 所有涉及用户个人信息、简历、项目经历的AI生成任务

---

## 核心原则

### 🔴 零容忍原则
**绝对禁止编造、假设或推断用户的个人信息、工作经历、项目成果**

- ❌ 不得声称用户在某个公司工作，除非简历明确写着
- ❌ 不得编造项目名称或具体数据
- ❌ 不得假设用户有某种技能或经验
- ❌ 不得"填充"或"补全"缺失的信息

### ✅ 必须做
- ✅ 使用PDF实际内容中明确提到的信息
- ✅ 在不确定时，询问用户而非假设
- ✅ 明确标注"待确认"或"需要补充"
- ✅ 使用引用格式标明信息来源

---

## 强制验证流程

### 阶段1：数据源验证（必做）

在开始任何任务前，必须执行：

```markdown
## 数据源验证清单
- [ ] PDF/简历是否成功读取？
- [ ] 读取到的内容是否为实际文本（而非URL/引用）？
- [ ] 是否能看到具体的公司名称、项目名称、时间？
- [ ] 内容是否清晰可读？

如果任何一项为"否"，必须：
1. 停止执行任务
2. 明确告知用户数据读取失败
3. 要求用户提供可用的格式（纯文本、图片、手动输入）
```

### 阶段2：关键事实确认（必做）

在生成任何涉及用户经历的陈述前，必须确认：

```markdown
## 关键事实确认清单
- [ ] 用户姓名是否与简历一致？
- [ ] 公司名称是否在简历中明确提到？
- [ ] 项目名称是否准确（一字不差）？
- [ ] 时间范围是否准确？
- [ ] 职位名称是否准确？

如果任何一项不确定：
→ 使用"待确认"标记
→ 或向用户询问
→ 绝不猜测或编造
```

### 阶段3：生成前校验（必做）

在生成最终输出前，必须：

```markdown
## 生成前校验清单
- [ ] 所有公司名称都在简历中吗？
- [ ] 所有项目名称都准确吗？
- [ ] 所有数据（效率提升、用户规模等）都有出处吗？
- [ ] 没有添加任何简历中没有的经历？
- [ ] 时间顺序一致吗？
```

---

## PDF读取失败处理协议

### 当Read工具返回URL或引用而非文本时

**错误示例**：
```json
{"type": "document", "source": {"type": "url", "url": "..."}}
```

**正确处理流程**：

1. **立即停止** - 不要基于此信息继续
2. **尝试备用方法**：
   ```bash
   # 使用Python pdfplumber
   python3 -c "import pdfplumber; ..."

   # 或使用其他PDF提取工具
   ```

3. **如果所有方法失败**：
   ```
   向用户明确说明：
   "抱歉，我无法读取这个PDF文件的实际内容。
   请提供以下任一格式：
   - 纯文本格式的简历
   - 简历截图（我可以读取图片中的文字）
   - 手动输入关键信息"
   ```

4. **绝不**：
   - ❌ 使用"假设"的经历
   - ❌ 参考其他类似案例来"推测"
   - ❌ 声称读取成功但实际没有

---

## 模板使用规范

### 允许使用的模板元素

**可以使用**：
- ✅ "待补充" - 当信息明确缺失时
- ✅ "根据简历..." - 当引用实际内容时
- ✅ "待确认" - 当不确定时
- ✅ 简历框架结构（如工作经历、项目经历）

**禁止使用**：
- ❌ 具体的公司名称（除非简历中明确有）
- ❌ 具体的项目名称（除非简历中明确有）
- ❌ 具体的数据（如"效率提升40%"）
- ❌ 时间范围（除非简历中明确有）

### 生成内容时的引用规则

**必须标明来源**：
```markdown
根据简历，用户在贝壳找房担任架构师/研发效能平台负责人（P9），
负责CodeLink智能研发助手项目。
```

**不能模糊引用**：
```markdown
❌ 用户在某个大厂做过AI编程工具项目
❌ 用户有类似Copilot集成经验（如果简历没说）
```

---

## 用户确认机制

### 何时必须向用户确认

在以下情况必须暂停并询问用户：

1. **简历信息不完整时**
   ```
   "我注意到您的简历中没有提到[某技能/某经历]，
    是否需要补充？"
   ```

2. **信息存在歧义时**
   ```
   "简历中提到的'CodeLink'项目，是否是指AI编程助手？
    请确认以便我准确描述。"
   ```

3. **准备使用某经历作为核心优势时**
   ```
   "我计划以您的CodeLink项目作为核心优势来准备面试，
    这是否准确？"
   ```

4. **准备生成具体话术或案例时**
   ```
   "基于您的CodeLink项目，我准备生成以下STAR案例：
    [案例内容]
    请确认是否准确？"
   ```

---

## 错误处理协议

### 当发现可能错误时

**立即执行**：
1. 停止当前任务
2. 明确告知用户
3. 请求重新确认数据源

**示例**：
```markdown
⚠️ 等待用户确认

我注意到可能存在数据准确性问题。为了确保生成的面试准备包
完全基于您的真实经历，请确认：

1. 您的简历是否已成功读取？
2. 以下信息是否准确？
   - 公司名称：[列出]
   - 项目名称：[列出]
   - 时间范围：[列出]

请确认或提供正确的信息。
```

---

## 事实核查清单（生成前必做）

在向用户展示最终结果前，逐项检查：

```markdown
## 事实核查清单

### 基本信息
- [ ] 姓名正确
- [ ] 联系方式正确
- [ ] 工作年限正确

### 工作经历
- [ ] 所有公司名称与简历一致
- [ ] 所有职位名称与简历一致
- [ ] 所有时间范围与简历一致
- [ ] 没有添加简历中没有的公司

### 项目经历
- [ ] 所有项目名称与简历一致
- [ ] 项目描述基于简历内容
- [ ] 没有编造项目成果或数据

### 技能和能力
- [ ] 只陈述简历中明确提到的技能
- [ ] 没有声称简历中没有的经验
- [ ] 评估基于实际内容而非假设

### 生成内容
- [ ] 所有陈述都有事实依据
- [ ] 没有编造或"补充"信息
- [ ] 不确定的信息已标记"待确认"
```

---

## 质量保证机制

### 输出时的声明

每次生成面试准备包时，必须包含：

```markdown
## 事实声明

本面试准备包完全基于您提供的简历内容生成。
- ✅ 所有公司名称、项目名称、数据均来自简历
- ✅ 未添加任何简历中没有的经历
- ⚠️ 标记为"待补充"的内容需要您后续完善

如发现任何不准确之处，请立即告知，我将修正。
```

---

## 紧急中止规则

在以下情况下必须立即中止任务：

1. **数据源不确定**
   - PDF读取失败
   - 只获取到URL/引用而非实际内容

2. **发现可能错误**
   - 用户指出信息不准确
   - 自己意识到可能编造了信息

3. **用户请求中止**
   - 用户明确表示对准确性有疑虑

**中止后必须**：
- 明确告知用户问题所在
- 不要继续生成可能不准确的内容
- 等待用户提供正确的信息

---

## 系统提示词（给Claude的指令）

当处理Interview Intel项目时，Claude必须：

```
1. 优先级 #1：数据准确性
   - 绝不编造用户信息
   - 不确定时询问而非假设

2. 强制验证：
   - PDF读取后，检查是否获取到实际文本
   - 生成内容前，逐项核查事实准确性

3. 透明沟通：
   - 明确告知用户信息来源
   - 标注不确定或待补充的内容

4. 用户确认：
   - 关键信息生成前必须用户确认
   - 发现错误立即停止并修正
```

---

## 文件使用说明

### 何时参考此文件

- **每次生成面试准备包前** - 阅读并遵守
- **PDF读取失败时** - 按照协议处理
- **用户质疑准确性时** - 用于自查和修正
- **更新系统时** - 确保新流程符合协议

### 维护和更新

- 当发现新的错误场景时，更新此协议
- 定期审查并强化验证机制
- 用户反馈的问题必须纳入协议

---

**版本历史**:
- v1.0 (2026-02-08): 初始版本，响应PDF读取错误和幻觉问题

---

**重要提示**: 此协议的目的是确保零错误，任何对此协议的违反都是不可接受的。
